<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Designing a PostrgreSQL db for acoustic telemetry - :fish: Fishy Data</title>
    <meta property="og:title" content="Designing a PostrgreSQL db for acoustic telemetry - :fish: Fishy Data">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="This is a series of posts that will aim to:
1. outline a philosophy and structure for the ideal acoustic telemetry database
1. justify this philosophy and structure within the context of a broader &amp;hellip;">
      <meta property="og:description" content="This is a series of posts that will aim to:
1. outline a philosophy and structure for the ideal acoustic telemetry database
1. justify this philosophy and structure within the context of a broader &amp;hellip;">
      
    

    
    

    

    
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <span class="name" style="margin: 0px !important;
  display: inline !important;
  height: auto;
  font-size: 30px;
  vertical-align: middle;
  line-height: 2;">
                        

                    </span>
      
<h1><a href="/" style="color: #111827;">üêü Fishy Data</a></h1>


 <p class="tagline">A blog about R, fish movement and other computery things.</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">‚úï</span>
    <span class="icon open-icon">‚ò∞</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/about/">About</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/index.xml">Subscribe</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Designing a PostrgreSQL db for acoustic telemetry</h1>

<h3>Seb
  /  2021-01-13</h3>
<hr>


      </header>




<script src="/post/2021/01/13/designing-a-postrgresql-db-for-acoustic-telemetry/index_files/header-attrs/header-attrs.js"></script>


<p>This is a series of posts that will aim to:<br />
1. outline a philosophy and structure for the ideal acoustic telemetry database<br />
1. justify this philosophy and structure within the context of a broader analysis pipeline (i.e.¬†inputs/outputs)
1. demonstrate specific SQL and R code to achieve this</p>
<p>This first post will focus on the first two points.</p>
<p>The analysis pipeline:
punch raw data -&gt; clean data for db -&gt; insert data into db (via app) -&gt; receive informative error messages -&gt; repeat until successful -&gt; PostgreSQL functions tidy data -&gt; read tidied data into R for analysis</p>
<p>For a bit of context, I worked on a a number of multi-year acoustic telemetry studies for freshwater fish while working with <a href="https://poissonconsulting.ca">Poisson Consulting</a>. Our approach was very similar to the above. However, R came into the picture much sooner (i.e.¬†around the clean stage) and remained there. We used R to check the data within the app (Shiny), R to tidy the data, etc. The approach I am proposing here removes R until the analysis stage and moves the preceding code into SQL functions within the database itself. Why?</p>
<ol style="list-style-type: decimal">
<li>Moves processing time (from tidying) into the data insert stage, thus reducing time needed to read tidied output at the other end of the pipeline (e.g.¬†by app)</li>
<li>Removes the need for Shiny (although Shiny may still be a useful option for a number of reasons) by simply providing tidied output tables from the db itself.</li>
<li>Removes potential error casued by translating data checking from R to SQL (i.e.¬†if the db rejects then that is that‚Ä¶whereas if checking r objects and hoping you have enough checks that then the SQL insert will work)<br />
</li>
<li>This bakes in the tidying code at the database design stage, thus removing the need to carry over (broken?) R code year to year.<br />
</li>
<li>take advantage of PostGIS (faster spatial operations on db itself).</li>
</ol>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2021/01/13/productivity-boosters-alfred-configuration/">Productivity boosters - Alfred &#43; .Rproj</a></span>
  <span class="nav-next"><a href="/post/2021/01/13/a-slightly-modified-blogdown-blog-with-yihui-hugo-ivy-theme/">A (modified) blogdown blog with hugo-ivy theme</a> &rarr;</span>
</nav>





<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.org/js/center-img.js"></script>

  

  
  <hr>
  <div class="copyright">¬© <a href="https://sebdalgarno.netlify.app">Seb Dalgarno</a> 2021 | <a href="https://github.com/sebdalgarno">Github</a> | <a href="https://twitter.com/sebdalgarno">Twitter</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

